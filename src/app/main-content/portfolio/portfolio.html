<section class="portfolio-section">
  <h3>{{ 'PORTFOLIO.HEADLINE' | translate }}</h3>
  <h2 class="portfolio-title">{{ 'PORTFOLIO.FEATURED' | translate }}</h2>
  <p class="portfolio-desc">
    {{ 'PORTFOLIO.DESC' | translate }}
  </p>
  <div class="portfolio-container">
    <div class="portfolio-list">
      <div class="portfolio-divider"></div>
      <ng-container *ngFor="let project of projects; let i = index">
        <div class="portfolio-item"
             (mouseenter)="showPreview(i)" (mouseleave)="hidePreview()" (click)="openDialog(i)">
          <div class="portfolio-row">
            <span class="portfolio-project-title">{{ project.title }}</span>
            <span class="portfolio-project-tags">
              <ng-container *ngFor="let tag of project.tags.split(' | '); let last = last">
                <span class="portfolio-tag-text">{{ tag }}</span>
                <span *ngIf="!last" class="tag-separator">|</span>
              </ng-container>
            </span>
          </div>
        </div>
        <div class="portfolio-divider"></div>
      </ng-container>
    </div>

    <div class="portfolio-preview" *ngIf="previewIndex !== null" [attr.data-project]="projects[previewIndex].title.toLowerCase().replace(' ', '-')">
    </div>
  </div>

  <div class="portfolio-dialog-backdrop" *ngIf="dialogIndex !== null" (click)="closeDialog()">
    <div class="portfolio-dialog" (click)="$event.stopPropagation()">
      <button class="dialog-close" (click)="closeDialog()" aria-label="Dialog schließen">
        <img src="portfolio/close_small.png" alt="Schließen" class="dialog-close-img" />
      </button>
      <div class="dialog-content">
        <div class="dialog-number">{{ projects[dialogIndex].number }}</div>
        <div class="dialog-title">{{ projects[dialogIndex].title }}</div>
        
        <div class="dialog-image-inline">
          <img [src]="projects[dialogIndex].dialogImage" alt="Project Screenshot" />
        </div>
        <div class="dialog-desc-title">{{ 'PORTFOLIO.DIALOG_ABOUT' | translate }}</div>
        <div class="dialog-desc">{{ projects[dialogIndex].descriptionKey | translate }}</div>
        <div class="dialog-tags">
          <span *ngFor="let tag of projects[dialogIndex].techs" class="dialog-tag">
            <img [src]="getSkillIcon(tag)" [alt]="tag + ' Icon'" class="dialog-skill-icon" />
            {{ tag }}
          </span>
        </div>
        <div class="dialog-links">
          <a *ngIf="projects[dialogIndex].github" [href]="projects[dialogIndex].github" target="_blank" class="dialog-link">
            {{ 'PORTFOLIO.GITHUB' | translate }}
            <img src="portfolio/arrow_forward_big.svg" alt="Pfeil" class="dialog-link-arrow" />
          </a>
          <a *ngIf="projects[dialogIndex].live" [href]="projects[dialogIndex].live" target="_blank" class="dialog-link">
            {{ 'PORTFOLIO.LIVE' | translate }}
            <img src="portfolio/arrow_forward_big.svg" alt="Pfeil" class="dialog-link-arrow" />
          </a>
        </div>
        <button class="dialog-next" (click)="nextDialog($event)">
          <span class="dialog-next-label">{{ 'PORTFOLIO.NEXT' | translate }}</span>
          <img src="portfolio/arrow_forward_big.svg" alt="Nächster Pfeil" class="dialog-next-arrow" />
        </button>
      </div>
      <div class="dialog-image">
        <img [src]="projects[dialogIndex].dialogImage" alt="Project Screenshot" />
      </div>
    </div>
  </div>
</section>
